(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

var _viewManager = require('./viewManager');

var _viewManager2 = _interopRequireDefault(_viewManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var viewmanager = new _viewManager2.default();

},{"./viewManager":2}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ViewManager = function ViewManager() {
  _classCallCheck(this, ViewManager);

  //initialize variables
  var vessel = void 0;
  var outputNumber = void 0;
  var vesselOptions = void 0;
  var currentOutput = 1;
  var check = "";
  var well_24 = [];
  var well_96 = [];
  var well_384 = [];
  var counter = 0;
  var letters = ["A", "B", "C", "D", "E", "F", "G", "H"];

  well_24[0] = 1;
  for (var i = 1; i < 384; i++) {
    well_24[i] = i + 1;
  };

  well_96[0] = 1;
  for (var i = 1; i < 96; i++) {
    well_96[i] = i + 1;
  };

  well_384[0] = 1;
  for (var i = 1; i < 384; i++) {
    well_384[i] = i + 1;
  }

  //methods
  function ab2str(buf) {
    return String.fromCharCode.apply(null, new Uint8Array(buf));
  };

  function str2ab_newline(str) {
    str = str + '\n';
    var buf = new ArrayBuffer(str.length); // 2 bytes for each char
    var bufView = new Uint8Array(buf);
    for (var i = 0, strLen = str.length; i < strLen; i++) {
      bufView[i] = str.charCodeAt(i);
    };
    return buf;
  };

  function str2ab(str) {
    var buf = new ArrayBuffer(str.length); // 2 bytes for each char
    var bufView = new Uint8Array(buf);
    for (var i = 0, strLen = str.length; i < strLen; i++) {
      bufView[i] = str.charCodeAt(i);
    };
    return buf;
  };

  function checkString(str) {
    var regex_1 = /\d+\s/;
    var regex_2 = /\d+/;
    if (str.search(regex_1, str) == 0) {
      str = str.replace(regex_1, "");
      while (str.search(regex_1, str) == 0) {
        str = str.replace(regex_1, "");
      };
      if (str.search(regex_2, str) == 0) {
        document.getElementById("openSyringe").style.borderColor = "green";
        document.getElementById("openSyringe").style.borderWidth = "0.15rem";
        return true;
      } else {
        document.getElementById("openSyringe").style.borderColor = "red";
        document.getElementById("openSyringe").style.borderWidth = "0.15rem";
        return false;
      }
    } else {
      document.getElementById("openSyringe").style.borderColor = "red";
      document.getElementById("openSyringe").style.borderWidth = "0.15rem";
      return false;
    };
  };

  //buttons
  this.inputButton = document.getElementById("inputButton");
  this.nextButton = document.getElementById("configureButton");
  this.submitButton = document.getElementById("submitProtocol");
  this.openButton = document.getElementById("openEnter");
  this.closeButton = document.getElementById("closeEnter");
  this.durationButton = document.getElementById("durationEnter");

  //event handlers
  this.inputButton.addEventListener('click', function (event) {
    document.getElementById('currentOutput').innerHTML = currentOutput;
    vessel = document.getElementById('selectVessel').value;
    outputNumber = document.getElementById('outputNumber').value;

    //create table for output vessel image
    //create 24-well plate
    if (vessel == 24) {
      var thead_insert = "<th scope='col'> </th>";
      for (var i = 1; i < 7; i++) {
        thead_insert += "<th scope='col'>" + i + "</th>";
      };
      thead_insert += "</tr>";

      var tbody_insert = "";
      var _letters = ["A", "B", "C", "D"];
      for (var i = 0; i < 4; i++) {
        tbody_insert += "<tr>";
        tbody_insert += "<th scope='row'>" + _letters[i] + "</th>";
        for (var j = 1; j < 7; j++) {
          var coordinate = _letters[i] + j;
          tbody_insert += "<td><button type='button' class='btn btn-primary btn-sm' onclick='appendXY(this)' value='" + j + "' id='" + coordinate + "'>" + coordinate + "</button></td>";
        };
        tbody_insert += "</tr>";
      };
      document.getElementById('tbody_insert').innerHTML = tbody_insert;
      document.getElementById('thead_insert').innerHTML = thead_insert;
      counter = 0;
      for (var i = 0; i < 4; i++) {
        for (var j = 1; j < 7; j++) {
          var identifier = _letters[i] + j;
          document.getElementById(identifier).value = well_24[counter];
          counter = counter + 1;
        }
      }
    };

    //create 96-well plate
    if (vessel == 96) {
      var _thead_insert = "<th scope='col'> </th>";
      for (var i = 1; i < 13; i++) {
        _thead_insert += "<th scope='col'>" + i + "</th>";
      };
      _thead_insert += "</tr>";

      var _tbody_insert = "";
      var _letters2 = ["A", "B", "C", "D", "E", "F", "G", "H"];

      for (var i = 0; i < 8; i++) {
        _tbody_insert += "<tr>";
        _tbody_insert += "<th scope='row'>" + _letters2[i] + "</th>";
        for (var j = 1; j < 13; j++) {
          var _coordinate = _letters2[i] + j;
          _tbody_insert += "<td><button type='button' class='btn btn-primary btn-sm' onclick='appendXY(this)' value='" + _coordinate + "' id='" + _coordinate + "'>" + _coordinate + "</button></td>";
        };
        _tbody_insert += "</tr>";
      };
      document.getElementById('tbody_insert').innerHTML = _tbody_insert;
      document.getElementById('thead_insert').innerHTML = _thead_insert;
      counter = 0;
      for (var i = 0; i < 7; i++) {
        for (var j = 1; j < 13; j++) {
          var _identifier = _letters2[i] + j;
          document.getElementById(_identifier).value = well_96[counter];
          counter = counter + 1;
        }
      }
    };

    //create 384-well plate
    if (vessel == 384) {
      var _thead_insert2 = "<th scope='col'> </th>";
      for (var i = 1; i < 25; i++) {
        _thead_insert2 += "<th scope='col'>" + i + "</th>";
      };
      _thead_insert2 += "</tr>";

      var _tbody_insert2 = "";
      var _letters3 = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P"];
      for (var i = 0; i < 15; i++) {
        _tbody_insert2 += "<tr>";
        _tbody_insert2 += "<th scope='row'>" + _letters3[i] + "</th>";
        for (var j = 1; j < 25; j++) {
          var _coordinate2 = _letters3[i] + j;
          _tbody_insert2 += "<td><button type='button' class='btn btn-primary btn-sm' onclick='appendXY(this)' value='" + _coordinate2 + "' id='" + _coordinate2 + "'>" + _coordinate2 + "</button></td>";
        };
        _tbody_insert2 += "</tr>";
      };
      document.getElementById('tbody_insert').innerHTML = _tbody_insert2;
      document.getElementById('thead_insert').innerHTML = _thead_insert2;
    };
    socket.emit("send-raw", {
      "name": '/dev/cu.usbmodem1411',
      "payload": str2ab_newline(outputNumber)
    });
  });

  this.nextButton.addEventListener('click', function (event) {
    if (currentOutput < outputNumber) {
      currentOutput = currentOutput + 1;
      document.getElementById('currentOutput').innerHTML = currentOutput;
    } else if (currentOutput == outputNumber - 1) {
      currentOutput = outputNumber;
      document.getElementById('currentOutput').innerHTML = currentOutput;
    };
    console.log(xy);
    socket.emit("send-raw", {
      "name": '/dev/cu.usbmodem1411',
      "payload": str2ab(xy)
    });
  });

  this.openButton.addEventListener('click', function (event) {
    var data = document.getElementById('openSyringe').value;
    if (checkString(data)) {
      socket.emit("send-raw", {
        "name": '/dev/cu.usbmodem1411',
        "payload": str2ab(data)
      });
    } else {
      console.log("Try again");
    }
  });

  this.closeButton.addEventListener('click', function (event) {
    var data = document.getElementById('closeSyringe').value;
    checkString(data);
    if (checkString(data)) {
      socket.emit("send-raw", {
        "name": '/dev/cu.usbmodem1411',
        "payload": str2ab(data)
      });
    } else {
      console.log("Try again");
    }
  });
};

exports.default = ViewManager;
;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvc2V0dXAuanMiLCJhcHAvdmlld01hbmFnZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7OztBQ0VBLElBQUksY0FBYyxJQUFsQixxQkFBa0IsRUFBbEI7Ozs7Ozs7Ozs7O0lDRmUsVyxHQUNiLHVCQUFhO0FBQUE7O0FBQ1g7QUFDQSxNQUFBLGVBQUE7QUFDQSxNQUFBLHFCQUFBO0FBQ0EsTUFBQSxzQkFBQTtBQUNBLE1BQUksZ0JBQUosQ0FBQTtBQUNBLE1BQUksUUFBSixFQUFBO0FBQ0EsTUFBSSxVQUFKLEVBQUE7QUFDQSxNQUFJLFVBQUosRUFBQTtBQUNBLE1BQUksV0FBSixFQUFBO0FBQ0EsTUFBSSxVQUFKLENBQUE7QUFDQSxNQUFJLFVBQVUsQ0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQWQsR0FBYyxDQUFkOztBQUVBLFVBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxPQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEdBQUEsRUFBQSxHQUFBLEVBQStCO0FBQzdCLFlBQUEsQ0FBQSxJQUFhLElBQWIsQ0FBQTtBQUNEOztBQUVELFVBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxPQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEVBQUEsRUFBQSxHQUFBLEVBQTZCO0FBQzNCLFlBQUEsQ0FBQSxJQUFhLElBQWIsQ0FBQTtBQUNEOztBQUVELFdBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxPQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEdBQUEsRUFBQSxHQUFBLEVBQThCO0FBQzVCLGFBQUEsQ0FBQSxJQUFjLElBQWQsQ0FBQTtBQUNEOztBQUVEO0FBQ0EsV0FBQSxNQUFBLENBQUEsR0FBQSxFQUFxQjtBQUNqQixXQUFPLE9BQUEsWUFBQSxDQUFB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U0FBQSxjQUFBLENBQUEsY0FBQSxFQUFYLEtBQUE7QUFDQSxnQkFBQSxJQUFBO0FBQ0EsUUFBSSxZQUFKLElBQUksQ0FBSixFQUF1QjtBQUNyQixhQUFBLElBQUEsQ0FBQSxVQUFBLEVBQXdCO0FBQ3BCLGdCQURvQixzQkFBQTtBQUVwQixtQkFBVyxPQUFBLElBQUE7QUFGUyxPQUF4QjtBQURGLEtBQUEsTUFLTztBQUNMLGNBQUEsR0FBQSxDQUFBLFdBQUE7QUFDRDtBQVZILEdBQUE7QUFZRCxDOztrQkE5TlksVztBQStOZCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBWaWV3TWFuYWdlciBmcm9tICcuL3ZpZXdNYW5hZ2VyJztcblxubGV0IHZpZXdtYW5hZ2VyID0gbmV3IFZpZXdNYW5hZ2VyKCk7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3TWFuYWdlcntcbiAgY29uc3RydWN0b3IoKXtcbiAgICAvL2luaXRpYWxpemUgdmFyaWFibGVzXG4gICAgbGV0IHZlc3NlbDtcbiAgICBsZXQgb3V0cHV0TnVtYmVyO1xuICAgIGxldCB2ZXNzZWxPcHRpb25zO1xuICAgIGxldCBjdXJyZW50T3V0cHV0ID0gMTtcbiAgICBsZXQgY2hlY2sgPSBcIlwiO1xuICAgIGxldCB3ZWxsXzI0ID0gW107XG4gICAgbGV0IHdlbGxfOTYgPSBbXTtcbiAgICBsZXQgd2VsbF8zODQgPSBbXTtcbiAgICBsZXQgY291bnRlciA9IDA7XG4gICAgbGV0IGxldHRlcnMgPSBbXCJBXCIsXCJCXCIsXCJDXCIsXCJEXCIsXCJFXCIsXCJGXCIsXCJHXCIsXCJIXCJdO1xuXG4gICAgd2VsbF8yNFswXSA9IDFcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IDM4NCA7IGkrKykge1xuICAgICAgd2VsbF8yNFtpXSA9IGkrMTtcbiAgICB9O1xuXG4gICAgd2VsbF85NlswXSA9IDE7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCA5NjsgaSsrKSB7XG4gICAgICB3ZWxsXzk2W2ldID0gaSsxO1xuICAgIH07XG5cbiAgICB3ZWxsXzM4NFswXSA9IDE7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCAzODQ7IGkrKykge1xuICAgICAgd2VsbF8zODRbaV0gPSBpKzE7XG4gICAgfVxuXG4gICAgLy9tZXRob2RzXG4gICAgZnVuY3Rpb24gYWIyc3RyKGJ1Zikge1xuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBuZXcgVWludDhBcnJheShidWYpKTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc3RyMmFiX25ld2xpbmUoc3RyKSB7XG4gICAgICAgIHN0ciA9IHN0ciArICdcXG4nO1xuICAgICAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGgpOyAvLyAyIGJ5dGVzIGZvciBlYWNoIGNoYXJcbiAgICAgICAgdmFyIGJ1ZlZpZXcgPSBuZXcgVWludDhBcnJheShidWYpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgc3RyTGVuID0gc3RyLmxlbmd0aDsgaSA8IHN0ckxlbjsgaSsrKSB7XG4gICAgICAgICAgICBidWZWaWV3W2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBidWY7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHN0cjJhYihzdHIpIHtcbiAgICAgICAgdmFyIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihzdHIubGVuZ3RoKTsgLy8gMiBieXRlcyBmb3IgZWFjaCBjaGFyXG4gICAgICAgIHZhciBidWZWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHN0ckxlbiA9IHN0ci5sZW5ndGg7IGkgPCBzdHJMZW47IGkrKykge1xuICAgICAgICAgICAgYnVmVmlld1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYnVmO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBjaGVja1N0cmluZyhzdHIpe1xuICAgICAgdmFyIHJlZ2V4XzEgPSAvXFxkK1xccy87XG4gICAgICBsZXQgcmVnZXhfMiA9IC9cXGQrLztcbiAgICAgIGlmIChzdHIuc2VhcmNoKHJlZ2V4XzEsc3RyKSA9PSAwKXtcbiAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UocmVnZXhfMSxcIlwiKTtcbiAgICAgICAgd2hpbGUgKHN0ci5zZWFyY2gocmVnZXhfMSxzdHIpID09IDApIHtcbiAgICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShyZWdleF8xLFwiXCIpO1xuICAgICAgICB9O1xuICAgICAgICBpZiAoc3RyLnNlYXJjaChyZWdleF8yLHN0cikgPT0gMCkge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3BlblN5cmluZ2VcIikuc3R5bGUuYm9yZGVyQ29sb3IgPSBcImdyZWVuXCI7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvcGVuU3lyaW5nZVwiKS5zdHlsZS5ib3JkZXJXaWR0aCA9IFwiMC4xNXJlbVwiO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3BlblN5cmluZ2VcIikuc3R5bGUuYm9yZGVyQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3BlblN5cmluZ2VcIikuc3R5bGUuYm9yZGVyV2lkdGggPSBcIjAuMTVyZW1cIjtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3BlblN5cmluZ2VcIikuc3R5bGUuYm9yZGVyQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9wZW5TeXJpbmdlXCIpLnN0eWxlLmJvcmRlcldpZHRoID0gXCIwLjE1cmVtXCI7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8vYnV0dG9uc1xuICAgIHRoaXMuaW5wdXRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0QnV0dG9uXCIpO1xuICAgIHRoaXMubmV4dEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlndXJlQnV0dG9uXCIpO1xuICAgIHRoaXMuc3VibWl0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXRQcm90b2NvbFwiKTtcbiAgICB0aGlzLm9wZW5CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9wZW5FbnRlclwiKTtcbiAgICB0aGlzLmNsb3NlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZUVudGVyXCIpO1xuICAgIHRoaXMuZHVyYXRpb25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1cmF0aW9uRW50ZXJcIik7XG5cbiAgICAvL2V2ZW50IGhhbmRsZXJzXG4gICAgdGhpcy5pbnB1dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnRPdXRwdXQnKS5pbm5lckhUTUwgPSBjdXJyZW50T3V0cHV0O1xuICAgICAgdmVzc2VsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdFZlc3NlbCcpLnZhbHVlO1xuICAgICAgb3V0cHV0TnVtYmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ291dHB1dE51bWJlcicpLnZhbHVlO1xuXG4gICAgICAvL2NyZWF0ZSB0YWJsZSBmb3Igb3V0cHV0IHZlc3NlbCBpbWFnZVxuICAgICAgLy9jcmVhdGUgMjQtd2VsbCBwbGF0ZVxuICAgICAgaWYgKHZlc3NlbCA9PSAyNCkge1xuICAgICAgICBsZXQgdGhlYWRfaW5zZXJ0ID0gXCI8dGggc2NvcGU9J2NvbCc+IDwvdGg+XCI7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgNzsgaSsrKXtcbiAgICAgICAgICB0aGVhZF9pbnNlcnQgKz0gXCI8dGggc2NvcGU9J2NvbCc+XCIraStcIjwvdGg+XCI7XG4gICAgICAgIH07XG4gICAgICAgIHRoZWFkX2luc2VydCArPSBcIjwvdHI+XCI7XG5cbiAgICAgICAgbGV0IHRib2R5X2luc2VydCA9IFwiXCI7XG4gICAgICAgIGxldCBsZXR0ZXJzID0gW1wiQVwiLFwiQlwiLFwiQ1wiLFwiRFwiXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7aSA8IDQ7IGkrKyl7XG4gICAgICAgICAgdGJvZHlfaW5zZXJ0ICs9IFwiPHRyPlwiO1xuICAgICAgICAgIHRib2R5X2luc2VydCArPSBcIjx0aCBzY29wZT0ncm93Jz5cIitsZXR0ZXJzW2ldK1wiPC90aD5cIjtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgNzsgaisrKSB7XG4gICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbGV0dGVyc1tpXStqO1xuICAgICAgICAgICAgICB0Ym9keV9pbnNlcnQgKz0gXCI8dGQ+PGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSdidG4gYnRuLXByaW1hcnkgYnRuLXNtJyBvbmNsaWNrPSdhcHBlbmRYWSh0aGlzKScgdmFsdWU9J1wiK2orXCInIGlkPSdcIitjb29yZGluYXRlK1wiJz5cIitjb29yZGluYXRlK1wiPC9idXR0b24+PC90ZD5cIjtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgdGJvZHlfaW5zZXJ0ICs9IFwiPC90cj5cIjtcbiAgICAgICAgfTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rib2R5X2luc2VydCcpLmlubmVySFRNTCA9IHRib2R5X2luc2VydDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoZWFkX2luc2VydCcpLmlubmVySFRNTCA9IHRoZWFkX2luc2VydDtcbiAgICAgICAgY291bnRlciA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgZm9yKHZhciBqID0gMTsgaiA8IDc7IGorKyl7XG4gICAgICAgICAgICBsZXQgaWRlbnRpZmllciA9IGxldHRlcnNbaV0rajtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkZW50aWZpZXIpLnZhbHVlID0gd2VsbF8yNFtjb3VudGVyXTtcbiAgICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyICsgMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vY3JlYXRlIDk2LXdlbGwgcGxhdGVcbiAgICAgIGlmICh2ZXNzZWwgPT0gOTYpIHtcbiAgICAgICAgbGV0IHRoZWFkX2luc2VydCA9IFwiPHRoIHNjb3BlPSdjb2wnPiA8L3RoPlwiO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IDEzOyBpKyspe1xuICAgICAgICAgIHRoZWFkX2luc2VydCArPSBcIjx0aCBzY29wZT0nY29sJz5cIitpK1wiPC90aD5cIjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhlYWRfaW5zZXJ0ICs9IFwiPC90cj5cIjtcblxuICAgICAgICBsZXQgdGJvZHlfaW5zZXJ0ID0gXCJcIjtcbiAgICAgICAgbGV0IGxldHRlcnMgPSBbXCJBXCIsXCJCXCIsXCJDXCIsXCJEXCIsXCJFXCIsXCJGXCIsXCJHXCIsXCJIXCJdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODsgaSsrKXtcbiAgICAgICAgICB0Ym9keV9pbnNlcnQgKz0gXCI8dHI+XCI7XG4gICAgICAgICAgdGJvZHlfaW5zZXJ0ICs9IFwiPHRoIHNjb3BlPSdyb3cnPlwiK2xldHRlcnNbaV0rXCI8L3RoPlwiO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCAxMzsgaisrKSB7XG4gICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbGV0dGVyc1tpXStqO1xuICAgICAgICAgICAgICB0Ym9keV9pbnNlcnQgKz0gXCI8dGQ+PGJ1dHRvbiB0eXBlPSdidXR0b24nIGNsYXNzPSdidG4gYnRuLXByaW1hcnkgYnRuLXNtJyBvbmNsaWNrPSdhcHBlbmRYWSh0aGlzKScgdmFsdWU9J1wiK2Nvb3JkaW5hdGUrXCInIGlkPSdcIitjb29yZGluYXRlK1wiJz5cIitjb29yZGluYXRlK1wiPC9idXR0b24+PC90ZD5cIjtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgdGJvZHlfaW5zZXJ0ICs9IFwiPC90cj5cIjtcbiAgICAgICAgfTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rib2R5X2luc2VydCcpLmlubmVySFRNTCA9IHRib2R5X2luc2VydDtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RoZWFkX2luc2VydCcpLmlubmVySFRNTCA9IHRoZWFkX2luc2VydDtcbiAgICAgICAgY291bnRlciA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgICAgZm9yKHZhciBqID0gMTsgaiA8IDEzOyBqKyspe1xuICAgICAgICAgICAgbGV0IGlkZW50aWZpZXIgPSBsZXR0ZXJzW2ldK2o7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZGVudGlmaWVyKS52YWx1ZSA9IHdlbGxfOTZbY291bnRlcl07XG4gICAgICAgICAgICBjb3VudGVyID0gY291bnRlciArIDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvL2NyZWF0ZSAzODQtd2VsbCBwbGF0ZVxuICAgICAgaWYgKHZlc3NlbCA9PSAzODQpIHtcbiAgICAgICAgbGV0IHRoZWFkX2luc2VydCA9IFwiPHRoIHNjb3BlPSdjb2wnPiA8L3RoPlwiO1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IDI1OyBpKyspe1xuICAgICAgICAgIHRoZWFkX2luc2VydCArPSBcIjx0aCBzY29wZT0nY29sJz5cIitpK1wiPC90aD5cIjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhlYWRfaW5zZXJ0ICs9IFwiPC90cj5cIjtcblxuICAgICAgICBsZXQgdGJvZHlfaW5zZXJ0ID0gXCJcIjtcbiAgICAgICAgbGV0IGxldHRlcnMgPSBbXCJBXCIsXCJCXCIsXCJDXCIsXCJEXCIsXCJFXCIsXCJGXCIsXCJHXCIsXCJIXCIsXCJJXCIsXCJKXCIsXCJLXCIsXCJMXCIsXCJNXCIsXCJOXCIsXCJPXCIsXCJQXCJdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDtpIDwgMTU7IGkrKyl7XG4gICAgICAgICAgdGJvZHlfaW5zZXJ0ICs9IFwiPHRyPlwiO1xuICAgICAgICAgIHRib2R5X2luc2VydCArPSBcIjx0aCBzY29wZT0ncm93Jz5cIitsZXR0ZXJzW2ldK1wiPC90aD5cIjtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAxOyBqIDwgMjU7IGorKykge1xuICAgICAgICAgICAgICBsZXQgY29vcmRpbmF0ZSA9IGxldHRlcnNbaV0rajtcbiAgICAgICAgICAgICAgdGJvZHlfaW5zZXJ0ICs9IFwiPHRkPjxidXR0b24gdHlwZT0nYnV0dG9uJyBjbGFzcz0nYnRuIGJ0bi1wcmltYXJ5IGJ0bi1zbScgb25jbGljaz0nYXBwZW5kWFkodGhpcyknIHZhbHVlPSdcIitjb29yZGluYXRlK1wiJyBpZD0nXCIrY29vcmRpbmF0ZStcIic+XCIrY29vcmRpbmF0ZStcIjwvYnV0dG9uPjwvdGQ+XCI7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgIHRib2R5X2luc2VydCArPSBcIjwvdHI+XCI7XG4gICAgICAgIH07XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0Ym9keV9pbnNlcnQnKS5pbm5lckhUTUwgPSB0Ym9keV9pbnNlcnQ7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aGVhZF9pbnNlcnQnKS5pbm5lckhUTUwgPSB0aGVhZF9pbnNlcnQ7XG4gICAgICB9O1xuICAgICAgc29ja2V0LmVtaXQoXCJzZW5kLXJhd1wiLCB7XG4gICAgICAgICAgXCJuYW1lXCI6ICcvZGV2L2N1LnVzYm1vZGVtMTQxMScsXG4gICAgICAgICAgXCJwYXlsb2FkXCI6IHN0cjJhYl9uZXdsaW5lKG91dHB1dE51bWJlcilcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICB0aGlzLm5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgIGlmIChjdXJyZW50T3V0cHV0IDwgb3V0cHV0TnVtYmVyKSB7XG4gICAgICAgIGN1cnJlbnRPdXRwdXQgPSBjdXJyZW50T3V0cHV0ICsgMTtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1cnJlbnRPdXRwdXQnKS5pbm5lckhUTUwgPSBjdXJyZW50T3V0cHV0O1xuICAgICAgfSBlbHNlIGlmIChjdXJyZW50T3V0cHV0ID09IChvdXRwdXROdW1iZXIgLSAxKSkge1xuICAgICAgICBjdXJyZW50T3V0cHV0ID0gb3V0cHV0TnVtYmVyO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3VycmVudE91dHB1dCcpLmlubmVySFRNTCA9IGN1cnJlbnRPdXRwdXQ7XG4gICAgICB9O1xuICAgICAgY29uc29sZS5sb2coeHkpO1xuICAgICAgc29ja2V0LmVtaXQoXCJzZW5kLXJhd1wiLCB7XG4gICAgICAgICAgXCJuYW1lXCI6ICcvZGV2L2N1LnVzYm1vZGVtMTQxMScsXG4gICAgICAgICAgXCJwYXlsb2FkXCI6IHN0cjJhYih4eSlcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICB0aGlzLm9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGxldCBkYXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ29wZW5TeXJpbmdlJykudmFsdWU7XG4gICAgICBpZiAoY2hlY2tTdHJpbmcoZGF0YSkpIHtcbiAgICAgICAgc29ja2V0LmVtaXQoXCJzZW5kLXJhd1wiLCB7XG4gICAgICAgICAgICBcIm5hbWVcIjogJy9kZXYvY3UudXNibW9kZW0xNDExJyxcbiAgICAgICAgICAgIFwicGF5bG9hZFwiOiBzdHIyYWIoZGF0YSlcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVHJ5IGFnYWluXCIpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsZnVuY3Rpb24gKGV2ZW50KXtcbiAgICAgIGxldCBkYXRhID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Nsb3NlU3lyaW5nZScpLnZhbHVlO1xuICAgICAgY2hlY2tTdHJpbmcoZGF0YSk7XG4gICAgICBpZiAoY2hlY2tTdHJpbmcoZGF0YSkpIHtcbiAgICAgICAgc29ja2V0LmVtaXQoXCJzZW5kLXJhd1wiLCB7XG4gICAgICAgICAgICBcIm5hbWVcIjogJy9kZXYvY3UudXNibW9kZW0xNDExJyxcbiAgICAgICAgICAgIFwicGF5bG9hZFwiOiBzdHIyYWIoZGF0YSlcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhcIlRyeSBhZ2FpblwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcbn07XG4iXX0=
