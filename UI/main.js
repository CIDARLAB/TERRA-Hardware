(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict';

var _viewManager = require('./viewManager');

var _viewManager2 = _interopRequireDefault(_viewManager);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var viewmanager = new _viewManager2.default();

},{"./viewManager":2}],2:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var ViewManager = function ViewManager() {
  _classCallCheck(this, ViewManager);

  //initialize variables
  var vessel = void 0;
  var outputNumber = void 0;
  var vesselOptions = void 0;
  var currentOutput = 1;
  var check = "";
  var well_24 = [];
  var well_96 = [];
  var well_384 = [];
  var counter = 0;
  var letters = ["A", "B", "C", "D", "E", "F", "G", "H"];

  well_24[0] = 1;
  for (var i = 1; i < 384; i++) {
    well_24[i] = i + 1;
  };

  well_96[0] = 1;
  for (var i = 1; i < 96; i++) {
    well_96[i] = i + 1;
  };

  well_384[0] = 1;
  for (var i = 1; i < 384; i++) {
    well_384[i] = i + 1;
  }

  //methods
  function ab2str(buf) {
    return String.fromCharCode.apply(null, new Uint8Array(buf));
  };

  function str2ab_newline(str) {
    str = str + '\n';
    var buf = new ArrayBuffer(str.length); // 2 bytes for each char
    var bufView = new Uint8Array(buf);
    for (var i = 0, strLen = str.length; i < strLen; i++) {
      bufView[i] = str.charCodeAt(i);
    };
    return buf;
  };

  function str2ab(str) {
    var buf = new ArrayBuffer(str.length); // 2 bytes for each char
    var bufView = new Uint8Array(buf);
    for (var i = 0, strLen = str.length; i < strLen; i++) {
      bufView[i] = str.charCodeAt(i);
    };
    return buf;
  };

  function checkString(str) {
    var regex_1 = /\d+\s/;
    var regex_2 = /\d+/;
    if (str.search(regex_1, str) == 0) {
      str = str.replace(regex_1, "");
      while (str.search(regex_1, str) == 0) {
        str = str.replace(regex_1, "");
      };
      if (str.search(regex_2, str) == 0) {
        document.getElementById("openSyringe").style.borderColor = "green";
        document.getElementById("openSyringe").style.borderWidth = "0.15rem";
        return true;
      } else {
        document.getElementById("openSyringe").style.borderColor = "red";
        document.getElementById("openSyringe").style.borderWidth = "0.15rem";
        return false;
      }
    } else {
      document.getElementById("openSyringe").style.borderColor = "red";
      document.getElementById("openSyringe").style.borderWidth = "0.15rem";
      return false;
    };
  };

  //buttons
  this.inputButton = document.getElementById("inputButton");
  this.nextButton = document.getElementById("configureButton");
  this.submitButton = document.getElementById("submitProtocol");
  this.openButton = document.getElementById("openEnter");
  this.closeButton = document.getElementById("closeEnter");
  this.durationButton = document.getElementById("durationEnter");

  //event handlers
  this.inputButton.addEventListener('click', function (event) {
    vessel = document.getElementById('selectVessel').value;
    outputNumber = document.getElementById('outputNumber').value;

    //create output tabs
    var nav = "";
    var nav_content = "";
    var vessel_ID = "";
    var thead_ID = "";
    var tbody_ID = "";
    var thead_array = [];
    var tbody_array = [];
    for (var _k = 0; _k < outputNumber; _k++) {
      var output_insert = "Output" + (_k + 1);
      var navID = output_insert + "tab";
      var href_insert = "#" + output_insert;

      vessel_ID = "vessel" + _k;
      thead_ID = "thead" + _k;
      tbody_ID = "tbody" + _k;

      thead_array.push(thead_ID);
      tbody_array.push(tbody_ID);
      nav += "<a class='nav-item nav-link' id='" + navID + "' data-toggle='tab' href='" + href_insert + "' role='tab' aria-controls='" + output_insert + "' aria-selected='false'>" + (_k + 1) + "</a>";
      nav_content += "<div class='tab-pane fade' id='" + output_insert + "' role='tabpanel' aria-labelledby='" + navID + "'><table class='table table-bordered table-sm' id='" + vessel_ID + "'><thead id='" + thead_ID + "'></thead><tbody id='" + tbody_ID + "'></tbody></table></div>";
    };

    console.log(tbody_array[0]);
    document.getElementById('navTabs').innerHTML = nav;
    document.getElementById('navContent').innerHTML = nav_content;

    //create table for output vessel image
    //create 24-well plate
    if (vessel == 24) {
      for (var k = 0; k < outputNumber; k++) {
        var thead_insert = "<th scope='col'> </th>";
        for (var i = 1; i < 7; i++) {
          thead_insert += "<th scope='col'>" + i + "</th>";
        };
        thead_insert += "</tr>";

        var tbody_insert = "";
        var _letters = ["A", "B", "C", "D"];
        for (var _i = 0; _i < 4; _i++) {
          tbody_insert += "<tr>";
          tbody_insert += "<th scope='row'>" + _letters[_i] + "</th>";
          for (var _j = 1; _j < 7; _j++) {
            var coordinate = _letters[_i] + _j;
            tbody_insert += "<td><button type='button' class='btn btn-primary btn-sm' onclick='appendXY(this)' value='" + _j + "' id='" + coordinate + "'>" + coordinate + "</button></td>";
          };
          tbody_insert += "</tr>";
        };

        document.getElementById(tbody_array[k]).innerHTML = tbody_insert;
        document.getElementById(thead_array[k]).innerHTML = thead_insert;
      };
      counter = 0;
      for (var _i2 = 0; _i2 < 4; _i2++) {
        for (var _j2 = 1; _j2 < 7; _j2++) {
          var identifier = letters[_i2] + _j2;
          document.getElementById(identifier).value = well_24[counter];
          counter = counter + 1;
        }
      }
    };

    //create 96-well plate
    if (vessel == 96) {
      for (var k = 0; k < outputNumber; k++) {
        var _thead_insert = "<th scope='col'> </th>";
        for (var i = 1; i < 13; i++) {
          _thead_insert += "<th scope='col'>" + i + "</th>";
        };
        _thead_insert += "</tr>";

        var _tbody_insert = "";
        var _letters2 = ["A", "B", "C", "D", "E", "F", "G", "H"];

        for (var i = 0; i < 8; i++) {
          _tbody_insert += "<tr>";
          _tbody_insert += "<th scope='row'>" + _letters2[i] + "</th>";
          for (var j = 1; j < 13; j++) {
            var _coordinate = _letters2[i] + j;
            _tbody_insert += "<td><button type='button' class='btn btn-primary btn-sm' onclick='appendXY(this)' value='" + _coordinate + "' id='" + _coordinate + "'>" + _coordinate + "</button></td>";
          };
          _tbody_insert += "</tr>";
        };

        document.getElementById(tbody_array[k]).innerHTML = _tbody_insert;
        document.getElementById(thead_array[k]).innerHTML = _thead_insert;
        counter = 0;
        for (var i = 0; i < 7; i++) {
          for (var j = 1; j < 13; j++) {
            var _identifier = _letters2[i] + j;
            document.getElementById(_identifier).value = well_96[counter];
            counter = counter + 1;
          }
        }
      };
    };

    //create 384-well plate
    if (vessel == 384) {
      for (var k = 0; k < outputNumber; k++) {
        var _thead_insert2 = "<th scope='col'> </th>";
        for (var i = 1; i < 25; i++) {
          _thead_insert2 += "<th scope='col'>" + i + "</th>";
        };
        _thead_insert2 += "</tr>";

        var _tbody_insert2 = "";
        var _letters3 = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P"];
        for (var i = 0; i < 15; i++) {
          _tbody_insert2 += "<tr>";
          _tbody_insert2 += "<th scope='row'>" + _letters3[i] + "</th>";
          for (var j = 1; j < 25; j++) {
            var _coordinate2 = _letters3[i] + j;
            _tbody_insert2 += "<td><button type='button' class='btn btn-primary btn-sm' onclick='appendXY(this)' value='" + _coordinate2 + "' id='" + _coordinate2 + "'>" + _coordinate2 + "</button></td>";
          };
          _tbody_insert2 += "</tr>";
        };
        document.getElementById(tbody_array[k]).innerHTML = _tbody_insert2;
        document.getElementById(thead_array[k]).innerHTML = _thead_insert2;
      };
    };

    socket.emit("send-raw", {
      "name": '/dev/cu.usbmodem1411',
      "payload": str2ab_newline(outputNumber)
    });
  });
};

exports.default = ViewManager;
;

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJhcHAvc2V0dXAuanMiLCJhcHAvdmlld01hbmFnZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7OztBQ0VBLElBQUksY0FBYyxJQUFsQixxQkFBa0IsRUFBbEI7Ozs7Ozs7Ozs7O0lDRmUsVyxHQUNiLHVCQUFjO0FBQUE7O0FBQ1o7QUFDQSxNQUFBLGVBQUE7QUFDQSxNQUFBLHFCQUFBO0FBQ0EsTUFBQSxzQkFBQTtBQUNBLE1BQUksZ0JBQUosQ0FBQTtBQUNBLE1BQUksUUFBSixFQUFBO0FBQ0EsTUFBSSxVQUFKLEVBQUE7QUFDQSxNQUFJLFVBQUosRUFBQTtBQUNBLE1BQUksV0FBSixFQUFBO0FBQ0EsTUFBSSxVQUFKLENBQUE7QUFDQSxNQUFJLFVBQVUsQ0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQWQsR0FBYyxDQUFkOztBQUVBLFVBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxPQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEdBQUEsRUFBQSxHQUFBLEVBQThCO0FBQzVCLFlBQUEsQ0FBQSxJQUFhLElBQWIsQ0FBQTtBQUNEOztBQUVELFVBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxPQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEVBQUEsRUFBQSxHQUFBLEVBQTZCO0FBQzNCLFlBQUEsQ0FBQSxJQUFhLElBQWIsQ0FBQTtBQUNEOztBQUVELFdBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxPQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEdBQUEsRUFBQSxHQUFBLEVBQThCO0FBQzVCLGFBQUEsQ0FBQSxJQUFjLElBQWQsQ0FBQTtBQUNEOztBQUVEO0FBQ0EsV0FBQSxNQUFBLENBQUEsR0FBQSxFQUFxQjtBQUNuQixXQUFPLE9BQUEsWUFBQSxDQUFBLEtBQUEsQ0FBQSxJQUFBLEVBQWdDLElBQUEsVUFBQSxDQUF2QyxHQUF1QyxDQUFoQyxDQUFQO0FBQ0Q7O0FBRUQsV0FBQSxjQUFBLENBQUEsR0FBQSxFQUE2QjtBQUMzQixVQUFNLE1BQU4sSUFBQTtBQUNBLFFBQUksTUFBTSxJQUFBLFdBQUEsQ0FBZ0IsSUFGQyxNQUVqQixDQUFWLENBRjJCLENBRVk7QUFDdkMsUUFBSSxVQUFVLElBQUEsVUFBQSxDQUFkLEdBQWMsQ0FBZDtBQUNBLFNBQUssSUFBSSxJQUFKLENBQUEsRUFBVyxTQUFTLElBQXpCLE1BQUEsRUFBcUMsSUFBckMsTUFBQSxFQUFBLEdBQUEsRUFBc0Q7QUFDcEQsY0FBQSxDQUFBLElBQWEsSUFBQSxVQUFBLENBQWIsQ0FBYSxDQUFiO0FBQ0Q7QUFDRCxXQUFBLEdBQUE7QUFDRDs7QUFFRCxXQUFBLE1BQUEsQ0FBQSxHQUFBLEVBQXFCO0FBQ25CLFFBQUksTUFBTSxJQUFBLFdBQUEsQ0FBZ0IsSUFEUCxNQUNULENBQVYsQ0FEbUIsQ0FDb0I7QUFDdkMsUUFBSSxVQUFVLElBQUEsVUFBQSxDQUFkLEdBQWMsQ0FBZDtBQUNBLFNBQUssSUFBSSxJQUFKLENBQUEsRUFBVyxTQUFTLElBQXpCLE1BQUEsRUFBcUMsSUFBckMsTUFBQSxFQUFBLEdBQUEsRUFBc0Q7QUFDcEQsY0FBQSxDQUFBLElBQWEsSUFBQSxVQUFBLENBQWIsQ0FBYSxDQUFiO0FBQ0Q7QUFDRCxXQUFBLEdBQUE7QUFDRDs7QUFFRCxXQUFBLFdBQUEsQ0FBQSxHQUFBLEVBQTBCO0FBQ3hCLFFBQUksVUFBSixPQUFBO0FBQ0EsUUFBSSxVQUFKLEtBQUE7QUFDQSxRQUFJLElBQUEsTUFBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEtBQUosQ0FBQSxFQUFtQztBQUNqQyxZQUFNLElBQUEsT0FBQSxDQUFBLE9BQUEsRUFBTixFQUFNLENBQU47QUFDQSxhQUFPLElBQUEsTUFBQSxDQUFBLE9BQUEsRUFBQSxHQUFBLEtBQVAsQ0FBQSxFQUFzQztBQUNwQyxjQUFNLElBQUEsT0FBQSxDQUFBLE9BQUEsRUFBTixFQUFNLENBQU47QUFDRDtBQUNELFVBQUksSUFBQSxNQUFBLENBQUEsT0FBQSxFQUFBLEdBQUEsS0FBSixDQUFBLEVBQW1DO0FBQ2pDLGlCQUFBLGNBQUEsQ0FBQSxhQUFBLEVBQUEsS0FBQSxDQUFBLFdBQUEsR0FBQSxPQUFBO0FBQ0EsaUJBQUEsY0FBQSxDQUFBLGFBQUEsRUFBQSxLQUFBLENBQUEsV0FBQSxHQUFBLFNBQUE7QUFDQSxlQUFBLElBQUE7QUFIRixPQUFBLE1BSU87QUFDTCxpQkFBQSxjQUFBLENBQUEsYUFBQSxFQUFBLEtBQUEsQ0FBQSxXQUFBLEdBQUEsS0FBQTtBQUNBLGlCQUFBLGNBQUEsQ0FBQSxhQUFBLEVBQUEsS0FBQSxDQUFBLFdBQUEsR0FBQSxTQUFBO0FBQ0EsZUFBQSxLQUFBO0FBQ0Q7QUFiSCxLQUFBLE1BY087QUFDTCxlQUFBLGNBQUEsQ0FBQSxhQUFBLEVBQUEsS0FBQSxDQUFBLFdBQUEsR0FBQSxLQUFBO0FBQ0EsZUFBQSxjQUFBLENBQUEsYUFBQSxFQUFBLEtBQUEsQ0FBQSxXQUFBLEdBQUEsU0FBQTtBQUNBLGFBQUEsS0FBQTtBQUNEO0FBQ0Y7O0FBRUQ7QUFDQSxPQUFBLFdBQUEsR0FBbUIsU0FBQSxjQUFBLENBQW5CLGFBQW1CLENBQW5CO0FBQ0EsT0FBQSxVQUFBLEdBQWtCLFNBQUEsY0FBQSxDQUFsQixpQkFBa0IsQ0FBbEI7QUFDQSxPQUFBLFlBQUEsR0FBb0IsU0FBQSxjQUFBLENBQXBCLGdCQUFvQixDQUFwQjtBQUNBLE9BQUEsVUFBQSxHQUFrQixTQUFBLGNBQUEsQ0FBbEIsV0FBa0IsQ0FBbEI7QUFDQSxPQUFBLFdBQUEsR0FBbUIsU0FBQSxjQUFBLENBQW5CLFlBQW1CLENBQW5CO0FBQ0EsT0FBQSxjQUFBLEdBQXNCLFNBQUEsY0FBQSxDQUF0QixlQUFzQixDQUF0Qjs7QUFFQTtBQUNBLE9BQUEsV0FBQSxDQUFBLGdCQUFBLENBQUEsT0FBQSxFQUEyQyxVQUFBLEtBQUEsRUFBZ0I7QUFDekQsYUFBUyxTQUFBLGNBQUEsQ0FBQSxjQUFBLEVBQVQsS0FBQTtBQUNBLG1CQUFlLFNBQUEsY0FBQSxDQUFBLGNBQUEsRUFBZixLQUFBOztBQUVBO0FBQ0EsUUFBSSxNQUFKLEVBQUE7QUFDQSxRQUFJLGNBQUosRUFBQTtBQUNBLFFBQUksWUFBSixFQUFBO0FBQ0EsUUFBSSxXQUFKLEVBQUE7QUFDQSxRQUFJLFdBQUosRUFBQTtBQUNBLFFBQUksY0FBSixFQUFBO0FBQ0EsUUFBSSxjQUFKLEVBQUE7QUFDQSxTQUFLLElBQUksS0FBVCxDQUFBLEVBQWdCLEtBQWhCLFlBQUEsRUFBQSxJQUFBLEVBQXVDO0FBQ3JDLFVBQUksZ0JBQWdCLFlBQVksS0FBaEMsQ0FBb0IsQ0FBcEI7QUFDQSxVQUFJLFFBQVEsZ0JBQVosS0FBQTtBQUNBLFVBQUksY0FBYyxNQUFsQixhQUFBOztBQUVBLGtCQUFZLFdBQVosRUFBQTtBQUNBLGlCQUFXLFVBQVgsRUFBQTtBQUNBLGlCQUFXLFVBQVgsRUFBQTs7QUFFQSxrQkFBQSxJQUFBLENBQUEsUUFBQTtBQUNBLGtCQUFBLElBQUEsQ0FBQSxRQUFBO0FBQ0EsYUFBTyxzQ0FBQSxLQUFBLEdBQUEsNEJBQUEsR0FBQSxXQUFBLEdBQUEsOEJBQUEsR0FBQSxhQUFBLEdBQUEsMEJBQUEsSUFBMEssS0FBMUssQ0FBQSxJQUFQLE1BQUE7QUFDQSxxQkFBZSxvQ0FBQSxhQUFBLEdBQUEscUNBQUEsR0FBQSxLQUFBLEdBQUEscURBQUEsR0FBQSxTQUFBLEdBQUEsZUFBQSxHQUFBLFFBQUEsR0FBQSx1QkFBQSxHQUFBLFFBQUEsR0FBZiwwQkFBQTtBQUNEOztBQUVELFlBQUEsR0FBQSxDQUFZLFlBQVosQ0FBWSxDQUFaO0FBQ0EsYUFBQSxjQUFBLENBQUEsU0FBQSxFQUFBLFNBQUEsR0FBQSxHQUFBO0FBQ0EsYUFBQSxjQUFBLENBQUEsWUFBQSxFQUFBLFNBQUEsR0FBQSxXQUFBOztBQUVBO0FBQ0E7QUFDQSxRQUFJLFVBQUosRUFBQSxFQUFrQjtBQUNoQixXQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLFlBQUEsRUFBQSxHQUFBLEVBQXVDO0FBQ3JDLFlBQUksZUFBSix3QkFBQTtBQUNBLGFBQUssSUFBSSxJQUFULENBQUEsRUFBZ0IsSUFBaEIsQ0FBQSxFQUFBLEdBQUEsRUFBNEI7QUFDMUIsMEJBQWdCLHFCQUFBLENBQUEsR0FBaEIsT0FBQTtBQUNEO0FBQ0Qsd0JBQUEsT0FBQTs7QUFFQSxZQUFJLGVBQUosRUFBQTtBQUNBLFlBQUksV0FBVSxDQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFkLEdBQWMsQ0FBZDtBQUNBLGFBQUssSUFBSSxLQUFULENBQUEsRUFBZ0IsS0FBaEIsQ0FBQSxFQUFBLElBQUEsRUFBNEI7QUFDMUIsMEJBQUEsTUFBQTtBQUNBLDBCQUFnQixxQkFBcUIsU0FBckIsRUFBcUIsQ0FBckIsR0FBaEIsT0FBQTtBQUNBLGVBQUssSUFBSSxLQUFULENBQUEsRUFBZ0IsS0FBaEIsQ0FBQSxFQUFBLElBQUEsRUFBNEI7QUFDMUIsZ0JBQUksYUFBYSxTQUFBLEVBQUEsSUFBakIsRUFBQTtBQUNBLDRCQUFnQiw4RkFBQSxFQUFBLEdBQUEsUUFBQSxHQUFBLFVBQUEsR0FBQSxJQUFBLEdBQUEsVUFBQSxHQUFoQixnQkFBQTtBQUNEO0FBQ0QsMEJBQUEsT0FBQTtBQUNEOztBQUVELGlCQUFBLGNBQUEsQ0FBd0IsWUFBeEIsQ0FBd0IsQ0FBeEIsRUFBQSxTQUFBLEdBQUEsWUFBQTtBQUNBLGlCQUFBLGNBQUEsQ0FBd0IsWUFBeEIsQ0FBd0IsQ0FBeEIsRUFBQSxTQUFBLEdBQUEsWUFBQTtBQUNEO0FBQ0QsZ0JBQUEsQ0FBQTtBQUNBLFdBQUssSUFBSSxNQUFULENBQUEsRUFBZ0IsTUFBaEIsQ0FBQSxFQUFBLEtBQUEsRUFBNEI7QUFDMUIsYUFBSyxJQUFJLE1BQVQsQ0FBQSxFQUFnQixNQUFoQixDQUFBLEVBQUEsS0FBQSxFQUE0QjtBQUMxQixjQUFJLGFBQWEsUUFBQSxHQUFBLElBQWpCLEdBQUE7QUFDQSxtQkFBQSxjQUFBLENBQUEsVUFBQSxFQUFBLEtBQUEsR0FBNEMsUUFBNUMsT0FBNEMsQ0FBNUM7QUFDQSxvQkFBVSxVQUFWLENBQUE7QUFDRDtBQUNGO0FBQ0Y7O0FBR0Q7QUFDQSxRQUFJLFVBQUosRUFBQSxFQUFrQjtBQUNoQixXQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLFlBQUEsRUFBQSxHQUFBLEVBQXVDO0FBQ3JDLFlBQUksZ0JBQUosd0JBQUE7QUFDQSxhQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEVBQUEsRUFBQSxHQUFBLEVBQTZCO0FBQzNCLDJCQUFnQixxQkFBQSxDQUFBLEdBQWhCLE9BQUE7QUFDRDtBQUNELHlCQUFBLE9BQUE7O0FBRUEsWUFBSSxnQkFBSixFQUFBO0FBQ0EsWUFBSSxZQUFVLENBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFkLEdBQWMsQ0FBZDs7QUFFQSxhQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLENBQUEsRUFBQSxHQUFBLEVBQTRCO0FBQzFCLDJCQUFBLE1BQUE7QUFDQSwyQkFBZ0IscUJBQXFCLFVBQXJCLENBQXFCLENBQXJCLEdBQWhCLE9BQUE7QUFDQSxlQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEVBQUEsRUFBQSxHQUFBLEVBQTZCO0FBQzNCLGdCQUFJLGNBQWEsVUFBQSxDQUFBLElBQWpCLENBQUE7QUFDQSw2QkFBZ0IsOEZBQUEsV0FBQSxHQUFBLFFBQUEsR0FBQSxXQUFBLEdBQUEsSUFBQSxHQUFBLFdBQUEsR0FBaEIsZ0JBQUE7QUFDRDtBQUNELDJCQUFBLE9BQUE7QUFDRDs7QUFFRCxpQkFBQSxjQUFBLENBQXdCLFlBQXhCLENBQXdCLENBQXhCLEVBQUEsU0FBQSxHQUFBLGFBQUE7QUFDQSxpQkFBQSxjQUFBLENBQXdCLFlBQXhCLENBQXdCLENBQXhCLEVBQUEsU0FBQSxHQUFBLGFBQUE7QUFDQSxrQkFBQSxDQUFBO0FBQ0EsYUFBSyxJQUFJLElBQVQsQ0FBQSxFQUFnQixJQUFoQixDQUFBLEVBQUEsR0FBQSxFQUE0QjtBQUMxQixlQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEVBQUEsRUFBQSxHQUFBLEVBQTZCO0FBQzNCLGdCQUFJLGNBQWEsVUFBQSxDQUFBLElBQWpCLENBQUE7QUFDQSxxQkFBQSxjQUFBLENBQUEsV0FBQSxFQUFBLEtBQUEsR0FBNEMsUUFBNUMsT0FBNEMsQ0FBNUM7QUFDQSxzQkFBVSxVQUFWLENBQUE7QUFDRDtBQUNGO0FBQ0Y7QUFDRjs7QUFFRDtBQUNBLFFBQUksVUFBSixHQUFBLEVBQW1CO0FBQ2pCLFdBQUssSUFBSSxJQUFULENBQUEsRUFBZ0IsSUFBaEIsWUFBQSxFQUFBLEdBQUEsRUFBdUM7QUFDckMsWUFBSSxpQkFBSix3QkFBQTtBQUNBLGFBQUssSUFBSSxJQUFULENBQUEsRUFBZ0IsSUFBaEIsRUFBQSxFQUFBLEdBQUEsRUFBNkI7QUFDM0IsNEJBQWdCLHFCQUFBLENBQUEsR0FBaEIsT0FBQTtBQUNEO0FBQ0QsMEJBQUEsT0FBQTs7QUFFQSxZQUFJLGlCQUFKLEVBQUE7QUFDQSxZQUFJLFlBQVUsQ0FBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBZCxHQUFjLENBQWQ7QUFDQSxhQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEVBQUEsRUFBQSxHQUFBLEVBQTZCO0FBQzNCLDRCQUFBLE1BQUE7QUFDQSw0QkFBZ0IscUJBQXFCLFVBQXJCLENBQXFCLENBQXJCLEdBQWhCLE9BQUE7QUFDQSxlQUFLLElBQUksSUFBVCxDQUFBLEVBQWdCLElBQWhCLEVBQUEsRUFBQSxHQUFBLEVBQTZCO0FBQzNCLGdCQUFJLGVBQWEsVUFBQSxDQUFBLElBQWpCLENBQUE7QUFDQSw4QkFBZ0IsOEZBQUEsWUFBQSxHQUFBLFFBQUEsR0FBQSxZQUFBLEdBQUEsSUFBQSxHQUFBLFlBQUEsR0FBaEIsZ0JBQUE7QUFDRDtBQUNELDRCQUFBLE9BQUE7QUFDRDtBQUNELGlCQUFBLGNBQUEsQ0FBd0IsWUFBeEIsQ0FBd0IsQ0FBeEIsRUFBQSxTQUFBLEdBQUEsY0FBQTtBQUNBLGlCQUFBLGNBQUEsQ0FBd0IsWUFBeEIsQ0FBd0IsQ0FBeEIsRUFBQSxTQUFBLEdBQUEsY0FBQTtBQUNEO0FBQ0Y7O0FBRUQsV0FBQSxJQUFBLENBQUEsVUFBQSxFQUF3QjtBQUN0QixjQURzQixzQkFBQTtBQUV0QixpQkFBVyxlQUFBLFlBQUE7QUFGVyxLQUF4QjtBQS9IRixHQUFBO0FBb0lELEM7O2tCQTFOWSxXO0FBMk5kIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiaW1wb3J0IFZpZXdNYW5hZ2VyIGZyb20gJy4vdmlld01hbmFnZXInO1xuXG5sZXQgdmlld21hbmFnZXIgPSBuZXcgVmlld01hbmFnZXIoKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpZXdNYW5hZ2VyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLy9pbml0aWFsaXplIHZhcmlhYmxlc1xuICAgIGxldCB2ZXNzZWw7XG4gICAgbGV0IG91dHB1dE51bWJlcjtcbiAgICBsZXQgdmVzc2VsT3B0aW9ucztcbiAgICBsZXQgY3VycmVudE91dHB1dCA9IDE7XG4gICAgbGV0IGNoZWNrID0gXCJcIjtcbiAgICBsZXQgd2VsbF8yNCA9IFtdO1xuICAgIGxldCB3ZWxsXzk2ID0gW107XG4gICAgbGV0IHdlbGxfMzg0ID0gW107XG4gICAgbGV0IGNvdW50ZXIgPSAwO1xuICAgIGxldCBsZXR0ZXJzID0gW1wiQVwiLCBcIkJcIiwgXCJDXCIsIFwiRFwiLCBcIkVcIiwgXCJGXCIsIFwiR1wiLCBcIkhcIl07XG5cbiAgICB3ZWxsXzI0WzBdID0gMVxuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgMzg0OyBpKyspIHtcbiAgICAgIHdlbGxfMjRbaV0gPSBpICsgMTtcbiAgICB9O1xuXG4gICAgd2VsbF85NlswXSA9IDE7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCA5NjsgaSsrKSB7XG4gICAgICB3ZWxsXzk2W2ldID0gaSArIDE7XG4gICAgfTtcblxuICAgIHdlbGxfMzg0WzBdID0gMTtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IDM4NDsgaSsrKSB7XG4gICAgICB3ZWxsXzM4NFtpXSA9IGkgKyAxO1xuICAgIH1cblxuICAgIC8vbWV0aG9kc1xuICAgIGZ1bmN0aW9uIGFiMnN0cihidWYpIHtcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KGJ1ZikpO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzdHIyYWJfbmV3bGluZShzdHIpIHtcbiAgICAgIHN0ciA9IHN0ciArICdcXG4nO1xuICAgICAgdmFyIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihzdHIubGVuZ3RoKTsgLy8gMiBieXRlcyBmb3IgZWFjaCBjaGFyXG4gICAgICB2YXIgYnVmVmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgc3RyTGVuID0gc3RyLmxlbmd0aDsgaSA8IHN0ckxlbjsgaSsrKSB7XG4gICAgICAgIGJ1ZlZpZXdbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gYnVmO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzdHIyYWIoc3RyKSB7XG4gICAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKHN0ci5sZW5ndGgpOyAvLyAyIGJ5dGVzIGZvciBlYWNoIGNoYXJcbiAgICAgIHZhciBidWZWaWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBzdHJMZW4gPSBzdHIubGVuZ3RoOyBpIDwgc3RyTGVuOyBpKyspIHtcbiAgICAgICAgYnVmVmlld1tpXSA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBidWY7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGNoZWNrU3RyaW5nKHN0cikge1xuICAgICAgdmFyIHJlZ2V4XzEgPSAvXFxkK1xccy87XG4gICAgICBsZXQgcmVnZXhfMiA9IC9cXGQrLztcbiAgICAgIGlmIChzdHIuc2VhcmNoKHJlZ2V4XzEsIHN0cikgPT0gMCkge1xuICAgICAgICBzdHIgPSBzdHIucmVwbGFjZShyZWdleF8xLCBcIlwiKTtcbiAgICAgICAgd2hpbGUgKHN0ci5zZWFyY2gocmVnZXhfMSwgc3RyKSA9PSAwKSB7XG4gICAgICAgICAgc3RyID0gc3RyLnJlcGxhY2UocmVnZXhfMSwgXCJcIik7XG4gICAgICAgIH07XG4gICAgICAgIGlmIChzdHIuc2VhcmNoKHJlZ2V4XzIsIHN0cikgPT0gMCkge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3BlblN5cmluZ2VcIikuc3R5bGUuYm9yZGVyQ29sb3IgPSBcImdyZWVuXCI7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvcGVuU3lyaW5nZVwiKS5zdHlsZS5ib3JkZXJXaWR0aCA9IFwiMC4xNXJlbVwiO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3BlblN5cmluZ2VcIikuc3R5bGUuYm9yZGVyQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3BlblN5cmluZ2VcIikuc3R5bGUuYm9yZGVyV2lkdGggPSBcIjAuMTVyZW1cIjtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3BlblN5cmluZ2VcIikuc3R5bGUuYm9yZGVyQ29sb3IgPSBcInJlZFwiO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9wZW5TeXJpbmdlXCIpLnN0eWxlLmJvcmRlcldpZHRoID0gXCIwLjE1cmVtXCI7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH07XG4gICAgfTtcblxuICAgIC8vYnV0dG9uc1xuICAgIHRoaXMuaW5wdXRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0QnV0dG9uXCIpO1xuICAgIHRoaXMubmV4dEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29uZmlndXJlQnV0dG9uXCIpO1xuICAgIHRoaXMuc3VibWl0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXRQcm90b2NvbFwiKTtcbiAgICB0aGlzLm9wZW5CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9wZW5FbnRlclwiKTtcbiAgICB0aGlzLmNsb3NlQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjbG9zZUVudGVyXCIpO1xuICAgIHRoaXMuZHVyYXRpb25CdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1cmF0aW9uRW50ZXJcIik7XG5cbiAgICAvL2V2ZW50IGhhbmRsZXJzXG4gICAgdGhpcy5pbnB1dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICB2ZXNzZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0VmVzc2VsJykudmFsdWU7XG4gICAgICBvdXRwdXROdW1iZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3V0cHV0TnVtYmVyJykudmFsdWU7XG5cbiAgICAgIC8vY3JlYXRlIG91dHB1dCB0YWJzXG4gICAgICBsZXQgbmF2ID0gXCJcIjtcbiAgICAgIGxldCBuYXZfY29udGVudCA9IFwiXCI7XG4gICAgICBsZXQgdmVzc2VsX0lEID0gXCJcIjtcbiAgICAgIGxldCB0aGVhZF9JRCA9IFwiXCI7XG4gICAgICBsZXQgdGJvZHlfSUQgPSBcIlwiO1xuICAgICAgbGV0IHRoZWFkX2FycmF5ID0gW107XG4gICAgICBsZXQgdGJvZHlfYXJyYXkgPSBbXTtcbiAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgb3V0cHV0TnVtYmVyOyBrKyspIHtcbiAgICAgICAgbGV0IG91dHB1dF9pbnNlcnQgPSBcIk91dHB1dFwiICsgKGsgKyAxKTtcbiAgICAgICAgbGV0IG5hdklEID0gb3V0cHV0X2luc2VydCArIFwidGFiXCI7XG4gICAgICAgIGxldCBocmVmX2luc2VydCA9IFwiI1wiICsgb3V0cHV0X2luc2VydDtcblxuICAgICAgICB2ZXNzZWxfSUQgPSBcInZlc3NlbFwiICsgaztcbiAgICAgICAgdGhlYWRfSUQgPSBcInRoZWFkXCIgKyBrO1xuICAgICAgICB0Ym9keV9JRCA9IFwidGJvZHlcIiArIGs7XG5cbiAgICAgICAgdGhlYWRfYXJyYXkucHVzaCh0aGVhZF9JRClcbiAgICAgICAgdGJvZHlfYXJyYXkucHVzaCh0Ym9keV9JRCk7XG4gICAgICAgIG5hdiArPSBcIjxhIGNsYXNzPSduYXYtaXRlbSBuYXYtbGluaycgaWQ9J1wiICsgbmF2SUQgKyBcIicgZGF0YS10b2dnbGU9J3RhYicgaHJlZj0nXCIgKyBocmVmX2luc2VydCArIFwiJyByb2xlPSd0YWInIGFyaWEtY29udHJvbHM9J1wiICsgb3V0cHV0X2luc2VydCArIFwiJyBhcmlhLXNlbGVjdGVkPSdmYWxzZSc+XCIgKyAoayArIDEpICsgXCI8L2E+XCI7XG4gICAgICAgIG5hdl9jb250ZW50ICs9IFwiPGRpdiBjbGFzcz0ndGFiLXBhbmUgZmFkZScgaWQ9J1wiICsgb3V0cHV0X2luc2VydCArIFwiJyByb2xlPSd0YWJwYW5lbCcgYXJpYS1sYWJlbGxlZGJ5PSdcIiArIG5hdklEICsgXCInPjx0YWJsZSBjbGFzcz0ndGFibGUgdGFibGUtYm9yZGVyZWQgdGFibGUtc20nIGlkPSdcIiArIHZlc3NlbF9JRCArIFwiJz48dGhlYWQgaWQ9J1wiICsgdGhlYWRfSUQgKyBcIic+PC90aGVhZD48dGJvZHkgaWQ9J1wiICsgdGJvZHlfSUQgKyBcIic+PC90Ym9keT48L3RhYmxlPjwvZGl2PlwiO1xuICAgICAgfTtcblxuICAgICAgY29uc29sZS5sb2codGJvZHlfYXJyYXlbMF0pO1xuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hdlRhYnMnKS5pbm5lckhUTUwgPSBuYXY7XG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmF2Q29udGVudCcpLmlubmVySFRNTCA9IG5hdl9jb250ZW50O1xuXG4gICAgICAvL2NyZWF0ZSB0YWJsZSBmb3Igb3V0cHV0IHZlc3NlbCBpbWFnZVxuICAgICAgLy9jcmVhdGUgMjQtd2VsbCBwbGF0ZVxuICAgICAgaWYgKHZlc3NlbCA9PSAyNCkge1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG91dHB1dE51bWJlcjsgaysrKSB7XG4gICAgICAgICAgbGV0IHRoZWFkX2luc2VydCA9IFwiPHRoIHNjb3BlPSdjb2wnPiA8L3RoPlwiO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgNzsgaSsrKSB7XG4gICAgICAgICAgICB0aGVhZF9pbnNlcnQgKz0gXCI8dGggc2NvcGU9J2NvbCc+XCIgKyBpICsgXCI8L3RoPlwiO1xuICAgICAgICAgIH07XG4gICAgICAgICAgdGhlYWRfaW5zZXJ0ICs9IFwiPC90cj5cIjtcblxuICAgICAgICAgIGxldCB0Ym9keV9pbnNlcnQgPSBcIlwiO1xuICAgICAgICAgIGxldCBsZXR0ZXJzID0gW1wiQVwiLCBcIkJcIiwgXCJDXCIsIFwiRFwiXTtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgdGJvZHlfaW5zZXJ0ICs9IFwiPHRyPlwiO1xuICAgICAgICAgICAgdGJvZHlfaW5zZXJ0ICs9IFwiPHRoIHNjb3BlPSdyb3cnPlwiICsgbGV0dGVyc1tpXSArIFwiPC90aD5cIjtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgNzsgaisrKSB7XG4gICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbGV0dGVyc1tpXSArIGo7XG4gICAgICAgICAgICAgIHRib2R5X2luc2VydCArPSBcIjx0ZD48YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBidG4tcHJpbWFyeSBidG4tc20nIG9uY2xpY2s9J2FwcGVuZFhZKHRoaXMpJyB2YWx1ZT0nXCIgKyBqICsgXCInIGlkPSdcIiArIGNvb3JkaW5hdGUgKyBcIic+XCIgKyBjb29yZGluYXRlICsgXCI8L2J1dHRvbj48L3RkPlwiO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRib2R5X2luc2VydCArPSBcIjwvdHI+XCI7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRib2R5X2FycmF5W2tdKS5pbm5lckhUTUwgPSB0Ym9keV9pbnNlcnQ7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhlYWRfYXJyYXlba10pLmlubmVySFRNTCA9IHRoZWFkX2luc2VydDtcbiAgICAgICAgfTtcbiAgICAgICAgY291bnRlciA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCA3OyBqKyspIHtcbiAgICAgICAgICAgIGxldCBpZGVudGlmaWVyID0gbGV0dGVyc1tpXSArIGo7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZGVudGlmaWVyKS52YWx1ZSA9IHdlbGxfMjRbY291bnRlcl07XG4gICAgICAgICAgICBjb3VudGVyID0gY291bnRlciArIDE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG5cbiAgICAgIC8vY3JlYXRlIDk2LXdlbGwgcGxhdGVcbiAgICAgIGlmICh2ZXNzZWwgPT0gOTYpIHtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBvdXRwdXROdW1iZXI7IGsrKykge1xuICAgICAgICAgIGxldCB0aGVhZF9pbnNlcnQgPSBcIjx0aCBzY29wZT0nY29sJz4gPC90aD5cIjtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IDEzOyBpKyspIHtcbiAgICAgICAgICAgIHRoZWFkX2luc2VydCArPSBcIjx0aCBzY29wZT0nY29sJz5cIiArIGkgKyBcIjwvdGg+XCI7XG4gICAgICAgICAgfTtcbiAgICAgICAgICB0aGVhZF9pbnNlcnQgKz0gXCI8L3RyPlwiO1xuXG4gICAgICAgICAgbGV0IHRib2R5X2luc2VydCA9IFwiXCI7XG4gICAgICAgICAgbGV0IGxldHRlcnMgPSBbXCJBXCIsIFwiQlwiLCBcIkNcIiwgXCJEXCIsIFwiRVwiLCBcIkZcIiwgXCJHXCIsIFwiSFwiXTtcblxuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgODsgaSsrKSB7XG4gICAgICAgICAgICB0Ym9keV9pbnNlcnQgKz0gXCI8dHI+XCI7XG4gICAgICAgICAgICB0Ym9keV9pbnNlcnQgKz0gXCI8dGggc2NvcGU9J3Jvdyc+XCIgKyBsZXR0ZXJzW2ldICsgXCI8L3RoPlwiO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCAxMzsgaisrKSB7XG4gICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbGV0dGVyc1tpXSArIGo7XG4gICAgICAgICAgICAgIHRib2R5X2luc2VydCArPSBcIjx0ZD48YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBidG4tcHJpbWFyeSBidG4tc20nIG9uY2xpY2s9J2FwcGVuZFhZKHRoaXMpJyB2YWx1ZT0nXCIgKyBjb29yZGluYXRlICsgXCInIGlkPSdcIiArIGNvb3JkaW5hdGUgKyBcIic+XCIgKyBjb29yZGluYXRlICsgXCI8L2J1dHRvbj48L3RkPlwiO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRib2R5X2luc2VydCArPSBcIjwvdHI+XCI7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRib2R5X2FycmF5W2tdKS5pbm5lckhUTUwgPSB0Ym9keV9pbnNlcnQ7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhlYWRfYXJyYXlba10pLmlubmVySFRNTCA9IHRoZWFkX2luc2VydDtcbiAgICAgICAgICBjb3VudGVyID0gMDtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDc7IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCAxMzsgaisrKSB7XG4gICAgICAgICAgICAgIGxldCBpZGVudGlmaWVyID0gbGV0dGVyc1tpXSArIGo7XG4gICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkZW50aWZpZXIpLnZhbHVlID0gd2VsbF85Nltjb3VudGVyXTtcbiAgICAgICAgICAgICAgY291bnRlciA9IGNvdW50ZXIgKyAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH07XG5cbiAgICAgIC8vY3JlYXRlIDM4NC13ZWxsIHBsYXRlXG4gICAgICBpZiAodmVzc2VsID09IDM4NCkge1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG91dHB1dE51bWJlcjsgaysrKSB7XG4gICAgICAgICAgbGV0IHRoZWFkX2luc2VydCA9IFwiPHRoIHNjb3BlPSdjb2wnPiA8L3RoPlwiO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgMjU7IGkrKykge1xuICAgICAgICAgICAgdGhlYWRfaW5zZXJ0ICs9IFwiPHRoIHNjb3BlPSdjb2wnPlwiICsgaSArIFwiPC90aD5cIjtcbiAgICAgICAgICB9O1xuICAgICAgICAgIHRoZWFkX2luc2VydCArPSBcIjwvdHI+XCI7XG5cbiAgICAgICAgICBsZXQgdGJvZHlfaW5zZXJ0ID0gXCJcIjtcbiAgICAgICAgICBsZXQgbGV0dGVycyA9IFtcIkFcIiwgXCJCXCIsIFwiQ1wiLCBcIkRcIiwgXCJFXCIsIFwiRlwiLCBcIkdcIiwgXCJIXCIsIFwiSVwiLCBcIkpcIiwgXCJLXCIsIFwiTFwiLCBcIk1cIiwgXCJOXCIsIFwiT1wiLCBcIlBcIl07XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNTsgaSsrKSB7XG4gICAgICAgICAgICB0Ym9keV9pbnNlcnQgKz0gXCI8dHI+XCI7XG4gICAgICAgICAgICB0Ym9keV9pbnNlcnQgKz0gXCI8dGggc2NvcGU9J3Jvdyc+XCIgKyBsZXR0ZXJzW2ldICsgXCI8L3RoPlwiO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDE7IGogPCAyNTsgaisrKSB7XG4gICAgICAgICAgICAgIGxldCBjb29yZGluYXRlID0gbGV0dGVyc1tpXSArIGo7XG4gICAgICAgICAgICAgIHRib2R5X2luc2VydCArPSBcIjx0ZD48YnV0dG9uIHR5cGU9J2J1dHRvbicgY2xhc3M9J2J0biBidG4tcHJpbWFyeSBidG4tc20nIG9uY2xpY2s9J2FwcGVuZFhZKHRoaXMpJyB2YWx1ZT0nXCIgKyBjb29yZGluYXRlICsgXCInIGlkPSdcIiArIGNvb3JkaW5hdGUgKyBcIic+XCIgKyBjb29yZGluYXRlICsgXCI8L2J1dHRvbj48L3RkPlwiO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRib2R5X2luc2VydCArPSBcIjwvdHI+XCI7XG4gICAgICAgICAgfTtcbiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0Ym9keV9hcnJheVtrXSkuaW5uZXJIVE1MID0gdGJvZHlfaW5zZXJ0O1xuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoZWFkX2FycmF5W2tdKS5pbm5lckhUTUwgPSB0aGVhZF9pbnNlcnQ7XG4gICAgICAgIH07XG4gICAgICB9O1xuXG4gICAgICBzb2NrZXQuZW1pdChcInNlbmQtcmF3XCIsIHtcbiAgICAgICAgXCJuYW1lXCI6ICcvZGV2L2N1LnVzYm1vZGVtMTQxMScsXG4gICAgICAgIFwicGF5bG9hZFwiOiBzdHIyYWJfbmV3bGluZShvdXRwdXROdW1iZXIpXG4gICAgICB9KVxuICAgIH0pO1xuICB9O1xufTtcbiJdfQ==
